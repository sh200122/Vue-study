{"ast":null,"code":"import TodoHeader from './components/TodoHeader.vue';\nimport TodoMain from './components/TodoMain.vue';\nimport TodoFooter from './components/TodoFooter.vue';\n// 渲染功能\n// 1.提供数据-提供在公共的父组件\n// 2.通过父组件将数据传递给TodoMain\n// 3.利用v-for渲染\n\n// 添加功能\n// 1.收集表单数据，v-model\n// 2.监听事件（回车，点击）\n// 3.子传父将任务名称传递给父组件App.vue\n// 4.进行添加，unshift（自己的数据自己负责）\n\n// 删除功能\n// 1.监听事件（监听删除的点击）携带id\n// 2.子传父，将删除的id传递给父组件\n// 3.进行删除filter（自己的数据自己负责）\n\n// 底部合计：父传子，传list，渲染\n// 清空功能：子传父 通知到父组件 父组件进行清除\n// 持久化存储：watch深度监听list的变化-往本地存储-进入页面优先读取本地\nexport default {\n  data() {\n    return {\n      list: JSON.parse(localStorage.getItem('list')) || [{\n        id: 1,\n        name: '打篮球'\n      }, {\n        id: 2,\n        name: '吃饭'\n      }, {\n        id: 3,\n        name: '看电影'\n      }, {\n        id: 4,\n        name: '睡觉'\n      }]\n    };\n  },\n  components: {\n    TodoFooter,\n    TodoHeader,\n    TodoMain\n  },\n  methods: {\n    handleAdd(todoName) {\n      this.list.unshift({\n        id: +new Date(),\n        name: todoName\n      });\n    },\n    handleDel(id) {\n      // console.log(id);\n      this.list = this.list.filter(item => item.id !== id);\n    },\n    handleClear() {\n      this.list = [];\n    }\n  },\n  watch: {\n    list: {\n      deep: true,\n      handler(newValue) {\n        localStorage.setItem('list', JSON.stringify(newValue));\n      }\n    }\n  }\n};","map":{"version":3,"names":["TodoHeader","TodoMain","TodoFooter","data","list","JSON","parse","localStorage","getItem","id","name","components","methods","handleAdd","todoName","unshift","Date","handleDel","filter","item","handleClear","watch","deep","handler","newValue","setItem","stringify"],"sources":["src/App.vue"],"sourcesContent":["<template>\r\n  <!-- 主体区域 -->\r\n  <section id=\"app\">\r\n    <TodoHeader @add=\"handleAdd\"></TodoHeader>\r\n    <TodoMain @del=\"handleDel\" :list=\"list\"></TodoMain>\r\n    <TodoFooter @clear=\"handleClear\" :list=\"list\"></TodoFooter>\r\n  </section>\r\n</template>\r\n\r\n<script>\r\nimport TodoHeader from './components/TodoHeader.vue'\r\nimport TodoMain from './components/TodoMain.vue'\r\nimport TodoFooter from './components/TodoFooter.vue'\r\n// 渲染功能\r\n// 1.提供数据-提供在公共的父组件\r\n// 2.通过父组件将数据传递给TodoMain\r\n// 3.利用v-for渲染\r\n\r\n// 添加功能\r\n// 1.收集表单数据，v-model\r\n// 2.监听事件（回车，点击）\r\n// 3.子传父将任务名称传递给父组件App.vue\r\n// 4.进行添加，unshift（自己的数据自己负责）\r\n\r\n// 删除功能\r\n// 1.监听事件（监听删除的点击）携带id\r\n// 2.子传父，将删除的id传递给父组件\r\n// 3.进行删除filter（自己的数据自己负责）\r\n\r\n// 底部合计：父传子，传list，渲染\r\n// 清空功能：子传父 通知到父组件 父组件进行清除\r\n// 持久化存储：watch深度监听list的变化-往本地存储-进入页面优先读取本地\r\nexport default {\r\n  data () {\r\n    return {\r\n      list: JSON.parse(localStorage.getItem('list'))||[\r\n        {id:1,name:'打篮球'},\r\n        {id:2,name:'吃饭'},\r\n        {id:3,name:'看电影'},\r\n        {id:4,name:'睡觉'},\r\n      ]\r\n    }\r\n  },\r\n  components:{\r\n    TodoFooter,\r\n    TodoHeader,\r\n    TodoMain\r\n  },\r\n  methods:{\r\n    handleAdd(todoName){\r\n      this.list.unshift({\r\n        id:+new Date(),\r\n        name:todoName\r\n      })\r\n    },\r\n    handleDel(id){\r\n      // console.log(id);\r\n      this.list=this.list.filter(item=>item.id!==id)\r\n    },\r\n    handleClear(){\r\n      this.list=[]\r\n    }\r\n  },\r\n  watch:{\r\n    list:{\r\n      deep:true,\r\n      handler(newValue){\r\n        localStorage.setItem('list',JSON.stringify(newValue))\r\n      }\r\n    }\r\n  },\r\n}\r\n</script>\r\n\r\n<style>\r\n\r\n</style>\r\n"],"mappings":"AAUA,OAAAA,UAAA;AACA,OAAAC,QAAA;AACA,OAAAC,UAAA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;EACAC,KAAA;IACA;MACAC,IAAA,EAAAC,IAAA,CAAAC,KAAA,CAAAC,YAAA,CAAAC,OAAA,cACA;QAAAC,EAAA;QAAAC,IAAA;MAAA,GACA;QAAAD,EAAA;QAAAC,IAAA;MAAA,GACA;QAAAD,EAAA;QAAAC,IAAA;MAAA,GACA;QAAAD,EAAA;QAAAC,IAAA;MAAA;IAEA;EACA;EACAC,UAAA;IACAT,UAAA;IACAF,UAAA;IACAC;EACA;EACAW,OAAA;IACAC,UAAAC,QAAA;MACA,KAAAV,IAAA,CAAAW,OAAA;QACAN,EAAA,OAAAO,IAAA;QACAN,IAAA,EAAAI;MACA;IACA;IACAG,UAAAR,EAAA;MACA;MACA,KAAAL,IAAA,QAAAA,IAAA,CAAAc,MAAA,CAAAC,IAAA,IAAAA,IAAA,CAAAV,EAAA,KAAAA,EAAA;IACA;IACAW,YAAA;MACA,KAAAhB,IAAA;IACA;EACA;EACAiB,KAAA;IACAjB,IAAA;MACAkB,IAAA;MACAC,QAAAC,QAAA;QACAjB,YAAA,CAAAkB,OAAA,SAAApB,IAAA,CAAAqB,SAAA,CAAAF,QAAA;MACA;IACA;EACA;AACA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}